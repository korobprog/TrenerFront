# Тестирование автоматизации создания ссылок на Google Meet

## Подготовка к тестированию

1. Убедитесь, что у вас настроены переменные окружения для работы с Google API:

   - `GOOGLE_CLIENT_ID`
   - `GOOGLE_CLIENT_SECRET`
   - `GOOGLE_REFRESH_TOKEN`

2. Убедитесь, что у вас есть доступ к Google Calendar API и включена интеграция с Google Meet.

## Запуск тестирования

### Автоматический запуск

Для быстрого запуска тестирования используйте скрипты:

- Windows: `scripts/test-meet-automation.bat`
- Linux/Mac: `scripts/test-meet-automation.sh`

Эти скрипты запустят сервер разработки и откроют страницу создания нового собеседования.

### Ручной запуск

1. Запустите сервер разработки:

   ```
   npm run dev
   ```

2. Откройте браузер и перейдите по адресу:
   ```
   http://localhost:3000/mock-interviews/new
   ```

## Процесс тестирования

### 1. Создание нового собеседования

1. Войдите в систему, если потребуется
2. Выберите дату и время собеседования
3. Нажмите "Далее"
4. На странице подтверждения нажмите "Создать собеседование"

### 2. Проверка результатов

#### Проверка логов сервера

В консоли сервера должны отображаться следующие логи:

```
API: Создание события в Google Calendar
API: Данные интервьюера: { id: '...', name: '...', email: '...' }
API: Данные интервьюируемого: { id: null, name: 'TBD', email: 'tbd@example.com' }
API: Данные собеседования: { id: 'temp-...', scheduledTime: '...' }

Calendar: В режиме разработки событие не создается
Calendar: Тестовая ссылка на Google Meet: https://meet.google.com/test-mock-link

API: Результат создания события: {
  success: true,
  message: 'Calendar event would be created in production',
  mockEventId: 'mock-event-...',
  meetingLink: 'https://meet.google.com/test-mock-link'
}
API: Получена ссылка на Google Meet: https://meet.google.com/test-mock-link
```

#### Проверка созданного собеседования

1. После создания собеседования вы будете перенаправлены на страницу со списком собеседований
2. Найдите только что созданное собеседование
3. Откройте его детали
4. Проверьте, что ссылка на Google Meet была автоматически создана и отображается на странице

## Отладка возможных проблем

### Если ссылка на Google Meet не создается:

1. Проверьте логи сервера на наличие ошибок
2. Убедитесь, что в режиме разработки функция `createCalendarEvent` возвращает тестовую ссылку
3. Проверьте, что в API-эндпоинте `pages/api/mock-interviews/index.js` правильно обрабатывается результат функции `createCalendarEvent`

### Если API возвращает ошибку:

1. Проверьте, что учетная запись Google имеет доступ к Google Calendar API
2. Проверьте, что в `.env.local` файле правильно настроены переменные окружения
3. Проверьте, что токены доступа не истекли и правильно обновляются

## Тестирование в производственной среде

Для тестирования в производственной среде:

1. Измените значение `NODE_ENV` на `production`
2. Убедитесь, что у вас настроены все необходимые переменные окружения
3. Запустите приложение в производственном режиме:

   ```
   npm run build
   npm start
   ```

4. Повторите шаги тестирования, описанные выше

В производственной среде будет создаваться реальное событие в Google Calendar с реальной ссылкой на Google Meet.
