<!DOCTYPE html>
<html lang="ru">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ OpenRouter API</title>
   <style>
      body {
         font-family: Arial, sans-serif;
         max-width: 1200px;
         margin: 0 auto;
         padding: 20px;
         background-color: #f5f5f5;
      }

      .container {
         background: white;
         padding: 20px;
         border-radius: 8px;
         box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
         margin-bottom: 20px;
      }

      .test-section {
         border: 1px solid #ddd;
         border-radius: 4px;
         padding: 15px;
         margin-bottom: 15px;
      }

      .test-section h3 {
         margin-top: 0;
         color: #333;
      }

      .success {
         background-color: #d4edda;
         border-color: #c3e6cb;
         color: #155724;
      }

      .error {
         background-color: #f8d7da;
         border-color: #f5c6cb;
         color: #721c24;
      }

      .info {
         background-color: #d1ecf1;
         border-color: #bee5eb;
         color: #0c5460;
      }

      button {
         background-color: #007bff;
         color: white;
         border: none;
         padding: 10px 20px;
         border-radius: 4px;
         cursor: pointer;
         margin: 5px;
      }

      button:hover {
         background-color: #0056b3;
      }

      button:disabled {
         background-color: #6c757d;
         cursor: not-allowed;
      }

      .log {
         background-color: #f8f9fa;
         border: 1px solid #dee2e6;
         border-radius: 4px;
         padding: 10px;
         margin: 10px 0;
         font-family: monospace;
         font-size: 12px;
         max-height: 300px;
         overflow-y: auto;
      }

      .form-group {
         margin-bottom: 15px;
      }

      label {
         display: block;
         margin-bottom: 5px;
         font-weight: bold;
      }

      input,
      select {
         width: 100%;
         padding: 8px;
         border: 1px solid #ddd;
         border-radius: 4px;
         box-sizing: border-box;
      }

      .summary {
         font-size: 18px;
         font-weight: bold;
         text-align: center;
         padding: 20px;
         border-radius: 8px;
         margin: 20px 0;
      }
   </style>
</head>

<body>
   <div class="container">
      <h1>üöÄ –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ OpenRouter API</h1>
      <p><strong>–¶–µ–ª—å:</strong> –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ OpenRouter API</p>

      <div class="test-section info">
         <h3>üìã –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
         <div class="form-group">
            <label>API –∫–ª—é—á:</label>
            <input type="text" id="apiKey"
               value="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">
         </div>
         <div class="form-group">
            <label>–ë–∞–∑–æ–≤—ã–π URL:</label>
            <input type="text" id="baseUrl" value="https://openrouter.ai/api/v1">
         </div>
         <div class="form-group">
            <label>–ú–æ–¥–µ–ª—å:</label>
            <input type="text" id="model" value="google/gemma-3-12b-it:free">
         </div>
         <div class="form-group">
            <label>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:</label>
            <input type="number" id="temperature" value="0.7" step="0.1" min="0" max="2">
         </div>
         <div class="form-group">
            <label>–ú–∞–∫—Å–∏–º—É–º —Ç–æ–∫–µ–Ω–æ–≤:</label>
            <input type="number" id="maxTokens" value="4000" min="1" max="8000">
         </div>
      </div>

      <div class="test-section">
         <h3>üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞–º–∏</h3>
         <button onclick="runAllTests()">–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã</button>
         <button onclick="testGetSettings()">–¢–µ—Å—Ç 1: GET –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
         <button onclick="testSaveSettings()">–¢–µ—Å—Ç 2: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
         <button onclick="testValidation()">–¢–µ—Å—Ç 3: –í–∞–ª–∏–¥–∞—Ü–∏—è</button>
         <button onclick="clearLogs()">–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏</button>
      </div>

      <div id="testResults"></div>

      <div class="test-section">
         <h3>üìä –õ–æ–≥–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
         <div id="logs" class="log"></div>
      </div>
   </div>

   <script>
      const testData = {
         maxQuestionsPerDay: 10,
         maxTokensPerQuestion: 4000,
         isActive: true,
         openRouterApiKey: '',
         openRouterBaseUrl: '',
         openRouterModel: '',
         openRouterTemperature: 0.7,
         openRouterMaxTokens: 4000
      };

      let testResults = {
         total: 0,
         passed: 0,
         failed: 0,
         tests: []
      };

      function log(message, type = 'info') {
         const timestamp = new Date().toLocaleTimeString();
         const logElement = document.getElementById('logs');
         const logEntry = document.createElement('div');
         logEntry.innerHTML = `[${timestamp}] ${message}`;

         if (type === 'error') {
            logEntry.style.color = '#dc3545';
         } else if (type === 'success') {
            logEntry.style.color = '#28a745';
         } else if (type === 'warning') {
            logEntry.style.color = '#ffc107';
         }

         logElement.appendChild(logEntry);
         logElement.scrollTop = logElement.scrollHeight;
      }

      function clearLogs() {
         document.getElementById('logs').innerHTML = '';
         document.getElementById('testResults').innerHTML = '';
         testResults = { total: 0, passed: 0, failed: 0, tests: [] };
      }

      function updateTestData() {
         testData.openRouterApiKey = document.getElementById('apiKey').value;
         testData.openRouterBaseUrl = document.getElementById('baseUrl').value;
         testData.openRouterModel = document.getElementById('model').value;
         testData.openRouterTemperature = parseFloat(document.getElementById('temperature').value);
         testData.openRouterMaxTokens = parseInt(document.getElementById('maxTokens').value);
      }

      async function makeRequest(method, data = null) {
         const options = {
            method: method,
            headers: {
               'Content-Type': 'application/json',
            },
            credentials: 'include'
         };

         if (data) {
            options.body = JSON.stringify(data);
         }

         try {
            const response = await fetch('/api/admin/interview-assistant-settings', options);
            const responseData = await response.json();

            return {
               statusCode: response.status,
               data: responseData,
               ok: response.ok
            };
         } catch (error) {
            throw new Error(`–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: ${error.message}`);
         }
      }

      async function testGetSettings() {
         log('üîç –¢–ï–°–¢ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ OpenRouter API', 'info');

         try {
            const response = await makeRequest('GET');

            log(`–°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞: ${response.statusCode}`, response.ok ? 'success' : 'error');
            log(`–î–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞: ${JSON.stringify(response.data, null, 2)}`);

            const testResult = {
               name: 'GET –∑–∞–ø—Ä–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫',
               passed: response.ok && response.data.settings,
               details: {
                  statusCode: response.statusCode,
                  hasSettings: !!response.data.settings
               }
            };

            testResults.tests.push(testResult);
            testResults.total++;

            if (testResult.passed) {
               log('‚úÖ –¢–ï–°–¢ 1 –ü–†–û–ô–î–ï–ù: GET –∑–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–µ–Ω', 'success');
               testResults.passed++;
            } else {
               log('‚ùå –¢–ï–°–¢ 1 –ù–ï –ü–†–û–ô–î–ï–ù: GET –∑–∞–ø—Ä–æ—Å –Ω–µ—É—Å–ø–µ—à–µ–Ω', 'error');
               testResults.failed++;
            }

            return testResult;

         } catch (error) {
            log(`‚ùå –¢–ï–°–¢ 1 –ù–ï –ü–†–û–ô–î–ï–ù: ${error.message}`, 'error');

            const testResult = {
               name: 'GET –∑–∞–ø—Ä–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫',
               passed: false,
               error: error.message
            };

            testResults.tests.push(testResult);
            testResults.total++;
            testResults.failed++;

            return testResult;
         }
      }

      async function testSaveSettings() {
         log('üíæ –¢–ï–°–¢ 2: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ OpenRouter API', 'info');
         updateTestData();

         log(`–û—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ: ${JSON.stringify(testData, null, 2)}`);

         try {
            const response = await makeRequest('PUT', testData);

            log(`–°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞: ${response.statusCode}`, response.ok ? 'success' : 'error');
            log(`–î–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞: ${JSON.stringify(response.data, null, 2)}`);

            const testResult = {
               name: 'PUT –∑–∞–ø—Ä–æ—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫',
               passed: response.ok,
               details: {
                  statusCode: response.statusCode,
                  hasMessage: !!response.data.message,
                  hasSettings: !!response.data.settings,
                  errorCode: response.data.code || null
               }
            };

            testResults.tests.push(testResult);
            testResults.total++;

            if (testResult.passed) {
               log('‚úÖ –¢–ï–°–¢ 2 –ü–†–û–ô–î–ï–ù: PUT –∑–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–µ–Ω, –æ—à–∏–±–∫–∞ 500 –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç', 'success');
               testResults.passed++;

               if (response.data.settings) {
                  log('üîç –ü–†–û–í–ï–†–ö–ê –°–û–•–†–ê–ù–ï–ù–ù–´–• –î–ê–ù–ù–´–•:', 'info');
                  const settings = response.data.settings;
                  log(`- API –∫–ª—é—á —Å–æ—Ö—Ä–∞–Ω–µ–Ω: ${!!settings.openRouterApiKey}`);
                  log(`- –ë–∞–∑–æ–≤—ã–π URL: ${settings.openRouterBaseUrl}`);
                  log(`- –ú–æ–¥–µ–ª—å: ${settings.openRouterModel}`);
                  log(`- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: ${settings.openRouterTemperature}`);
                  log(`- –ú–∞–∫—Å–∏–º—É–º —Ç–æ–∫–µ–Ω–æ–≤: ${settings.openRouterMaxTokens}`);
                  log(`- –¢–∏–ø API: ${settings.apiType}`);
               }
            } else {
               log('‚ùå –¢–ï–°–¢ 2 –ù–ï –ü–†–û–ô–î–ï–ù: PUT –∑–∞–ø—Ä–æ—Å –Ω–µ—É—Å–ø–µ—à–µ–Ω', 'error');
               testResults.failed++;

               if (response.statusCode === 500) {
                  log('üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: –û—à–∏–±–∫–∞ 500 –≤—Å–µ –µ—â–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç!', 'error');
               }
            }

            return testResult;

         } catch (error) {
            log(`‚ùå –¢–ï–°–¢ 2 –ù–ï –ü–†–û–ô–î–ï–ù: ${error.message}`, 'error');

            const testResult = {
               name: 'PUT –∑–∞–ø—Ä–æ—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫',
               passed: false,
               error: error.message
            };

            testResults.tests.push(testResult);
            testResults.total++;
            testResults.failed++;

            return testResult;
         }
      }

      async function testValidation() {
         log('üõ°Ô∏è –¢–ï–°–¢ 3: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π', 'info');

         const invalidData = {
            ...testData,
            openRouterApiKey: '', // –ü—É—Å—Ç–æ–π API –∫–ª—é—á
            openRouterTemperature: 'invalid', // –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
            maxQuestionsPerDay: 'not_a_number' // –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —á–∏—Å–ª–æ
         };

         log(`–û—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: ${JSON.stringify(invalidData, null, 2)}`);

         try {
            const response = await makeRequest('PUT', invalidData);

            log(`–°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞: ${response.statusCode}`, response.statusCode === 400 ? 'success' : 'error');
            log(`–î–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞: ${JSON.stringify(response.data, null, 2)}`);

            const testResult = {
               name: '–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π',
               passed: response.statusCode === 400, // –û–∂–∏–¥–∞–µ–º –æ—à–∏–±–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏
               details: {
                  statusCode: response.statusCode,
                  errorCode: response.data.code || null,
                  message: response.data.message || null
               }
            };

            testResults.tests.push(testResult);
            testResults.total++;

            if (testResult.passed) {
               log('‚úÖ –¢–ï–°–¢ 3 –ü–†–û–ô–î–ï–ù: –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', 'success');
               testResults.passed++;
            } else {
               log('‚ùå –¢–ï–°–¢ 3 –ù–ï –ü–†–û–ô–î–ï–ù: –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç', 'error');
               testResults.failed++;
            }

            return testResult;

         } catch (error) {
            log(`‚ùå –¢–ï–°–¢ 3 –ù–ï –ü–†–û–ô–î–ï–ù: ${error.message}`, 'error');

            const testResult = {
               name: '–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π',
               passed: false,
               error: error.message
            };

            testResults.tests.push(testResult);
            testResults.total++;
            testResults.failed++;

            return testResult;
         }
      }

      async function runAllTests() {
         clearLogs();
         log('üöÄ –ù–ê–ß–ê–õ–û –§–ò–ù–ê–õ–¨–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø OPENROUTER API', 'info');
         log('='.repeat(60));

         // –û—Ç–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫–∏ –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
         const buttons = document.querySelectorAll('button');
         buttons.forEach(btn => btn.disabled = true);

         try {
            await testGetSettings();
            await new Promise(resolve => setTimeout(resolve, 1000)); // –ü–∞—É–∑–∞ –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏

            await testSaveSettings();
            await new Promise(resolve => setTimeout(resolve, 1000));

            await testValidation();

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç
            showFinalReport();

         } finally {
            // –í–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ
            buttons.forEach(btn => btn.disabled = false);
         }
      }

      function showFinalReport() {
         log('='.repeat(60), 'info');
         log('üìä –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢ –§–ò–ù–ê–õ–¨–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø', 'info');
         log('='.repeat(60), 'info');

         log(`üìà –°–¢–ê–¢–ò–°–¢–ò–ö–ê:`, 'info');
         log(`- –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: ${testResults.total}`);
         log(`- –ü—Ä–æ–π–¥–µ–Ω–æ: ${testResults.passed} ‚úÖ`, 'success');
         log(`- –ù–µ –ø—Ä–æ–π–¥–µ–Ω–æ: ${testResults.failed} ‚ùå`, 'error');
         log(`- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞: ${Math.round((testResults.passed / testResults.total) * 100)}%`);

         log(`üìã –î–ï–¢–ê–õ–ò –¢–ï–°–¢–û–í:`, 'info');
         testResults.tests.forEach((test, index) => {
            const status = test.passed ? '‚úÖ –ü–†–û–ô–î–ï–ù' : '‚ùå –ù–ï –ü–†–û–ô–î–ï–ù';
            const color = test.passed ? 'success' : 'error';
            log(`${index + 1}. ${test.name}: ${status}`, color);
            if (test.error) {
               log(`   –û—à–∏–±–∫–∞: ${test.error}`, 'error');
            }
         });

         // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
         const isFixed = testResults.passed >= 2; // –ú–∏–Ω–∏–º—É–º 2 –∏–∑ 3 —Ç–µ—Å—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏
         const has500Error = testResults.tests.some(test =>
            test.details && test.details.statusCode === 500
         );

         log(`üéØ –°–¢–ê–¢–£–° –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:`, 'info');
         if (isFixed && !has500Error) {
            log('‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –£–°–ü–ï–®–ù–û: –û—à–∏–±–∫–∞ 500 —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞, API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', 'success');
         } else if (has500Error) {
            log('‚ùå –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ù–ï –ó–ê–í–ï–†–®–ï–ù–û: –û—à–∏–±–∫–∞ 500 –≤—Å–µ –µ—â–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç', 'error');
         } else {
            log('‚ö†Ô∏è –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ß–ê–°–¢–ò–ß–ù–û: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', 'warning');
         }

         log(`üîë –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –° –ü–†–ï–î–û–°–¢–ê–í–õ–ï–ù–ù–´–ú –ö–õ–Æ–ß–û–ú:`, 'info');
         log(`- API –∫–ª—é—á: ${document.getElementById('apiKey').value}`);
         log(`- –°—Ç–∞—Ç—É—Å: ${isFixed ? '–†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚úÖ' : '–¢—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚ùå'}`, isFixed ? 'success' : 'error');

         // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–∏–∑—É–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
         showVisualReport(isFixed, has500Error);
      }

      function showVisualReport(isFixed, has500Error) {
         const resultsDiv = document.getElementById('testResults');

         let summaryClass = 'summary ';
         let summaryText = '';

         if (isFixed && !has500Error) {
            summaryClass += 'success';
            summaryText = '‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û';
         } else if (has500Error) {
            summaryClass += 'error';
            summaryText = '‚ùå –û–®–ò–ë–ö–ê 500 –í–°–ï –ï–©–ï –ü–†–ò–°–£–¢–°–¢–í–£–ï–¢';
         } else {
            summaryClass += 'info';
            summaryText = '‚ö†Ô∏è –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –¢–†–ï–ë–£–ï–¢ –î–û–†–ê–ë–û–¢–ö–ò';
         }

         resultsDiv.innerHTML = `
                <div class="${summaryClass}">
                    ${summaryText}
                </div>
                <div class="test-section">
                    <h3>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
                    <p><strong>–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤:</strong> ${testResults.total}</p>
                    <p><strong>–ü—Ä–æ–π–¥–µ–Ω–æ:</strong> ${testResults.passed}</p>
                    <p><strong>–ù–µ –ø—Ä–æ–π–¥–µ–Ω–æ:</strong> ${testResults.failed}</p>
                    <p><strong>–ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞:</strong> ${Math.round((testResults.passed / testResults.total) * 100)}%</p>
                </div>
            `;
      }

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
      window.onload = function () {
         log('üîß –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞', 'info');
         log('üìù –î–ª—è –Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã"', 'info');
      };
   </script>
</body>

</html>