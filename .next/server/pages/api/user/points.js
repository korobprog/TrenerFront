"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/user/points";
exports.ids = ["pages/api/user/points"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next-auth/react":
/*!**********************************!*\
  !*** external "next-auth/react" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("next-auth/react");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Fpoints&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cpoints.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Fpoints&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cpoints.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_user_points_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\user\\points.js */ \"(api)/./pages/api/user/points.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_user_points_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_user_points_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/user/points\",\n        pathname: \"/api/user/points\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_user_points_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVzZXIlMkZwb2ludHMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q3VzZXIlNUNwb2ludHMuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDMEQ7QUFDMUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHNEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxzREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnRlcnZpZXctcHJlcC8/OWQwMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHVzZXJcXFxccG9pbnRzLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdXNlci9wb2ludHNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS91c2VyL3BvaW50c1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Fpoints&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cpoints.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/prisma.js":
/*!***********************!*\
  !*** ./lib/prisma.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\n// Предотвращаем создание множества экземпляров Prisma Client в режиме разработки\n// https://www.prisma.io/docs/guides/performance-and-optimization/connection-management#prevent-multiple-instances-in-development\n// Создаем новый экземпляр PrismaClient с включенным логированием запросов\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        \"query\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ]\n});\n// Добавляем логирование для отладки\nconsole.log(\"Prisma Client инициализирован:\", prisma ? \"успешно\" : \"ошибка\");\n// Проверяем доступность моделей\nconsole.log(\"Доступные модели в Prisma Client:\", Object.keys(prisma));\n// Проверяем наличие модели UserPoints\ntry {\n    console.log(\"Проверка модели UserPoints...\");\n    // Выполняем тестовый запрос к модели UserPoints\n    prisma.$queryRaw`SELECT EXISTS (\r\n    SELECT FROM information_schema.tables\r\n    WHERE table_schema = 'public'\r\n    AND table_name = 'UserPoints'\r\n  )`.then((result)=>{\n        console.log(\"Результат проверки таблицы UserPoints:\", result);\n    }).catch((error)=>{\n        console.error(\"Ошибка при проверке таблицы UserPoints:\", error);\n    });\n} catch (error) {\n    console.error(\"Ошибка при проверке модели UserPoints:\", error);\n}\n// Проверяем таблицу Session\ntry {\n    console.log(\"Проверка таблицы Session...\");\n    // Выполняем тестовый запрос к таблице Session\n    prisma.$queryRaw`SELECT EXISTS (\r\n    SELECT FROM information_schema.tables\r\n    WHERE table_schema = 'public'\r\n    AND table_name = 'Session'\r\n  )`.then((result)=>{\n        console.log(\"Результат проверки таблицы Session:\", result);\n        // Если таблица существует, проверяем количество записей\n        if (result[0].exists) {\n            prisma.session.count().then((count)=>{\n                console.log(\"Количество записей в таблице Session:\", count);\n            }).catch((error)=>{\n                console.error(\"Ошибка при подсчете записей в таблице Session:\", error);\n            });\n        }\n    }).catch((error)=>{\n        console.error(\"Ошибка при проверке таблицы Session:\", error);\n    });\n} catch (error) {\n    console.error(\"Ошибка при проверке таблицы Session:\", error);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcHJpc21hLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4QztBQUU5QyxpRkFBaUY7QUFDakYsaUlBQWlJO0FBRWpJLDBFQUEwRTtBQUMxRSxNQUFNQyxTQUFTLElBQUlELHdEQUFZQSxDQUFDO0lBQzlCRSxLQUFLO1FBQUM7UUFBUztRQUFRO1FBQVE7S0FBUTtBQUN6QztBQUVBLG9DQUFvQztBQUNwQ0MsUUFBUUQsR0FBRyxDQUFDLGtDQUFrQ0QsU0FBUyxZQUFZO0FBRW5FLGdDQUFnQztBQUNoQ0UsUUFBUUQsR0FBRyxDQUFDLHFDQUFxQ0UsT0FBT0MsSUFBSSxDQUFDSjtBQUU3RCxzQ0FBc0M7QUFDdEMsSUFBSTtJQUNGRSxRQUFRRCxHQUFHLENBQUM7SUFDWixnREFBZ0Q7SUFDaERELE9BQU9LLFNBQVMsQ0FBQzs7OztHQUloQixDQUFDLENBQ0NDLElBQUksQ0FBQyxDQUFDQztRQUNMTCxRQUFRRCxHQUFHLENBQUMsMENBQTBDTTtJQUN4RCxHQUNDQyxLQUFLLENBQUMsQ0FBQ0M7UUFDTlAsUUFBUU8sS0FBSyxDQUFDLDJDQUEyQ0E7SUFDM0Q7QUFDSixFQUFFLE9BQU9BLE9BQU87SUFDZFAsUUFBUU8sS0FBSyxDQUFDLDBDQUEwQ0E7QUFDMUQ7QUFFQSw0QkFBNEI7QUFDNUIsSUFBSTtJQUNGUCxRQUFRRCxHQUFHLENBQUM7SUFDWiw4Q0FBOEM7SUFDOUNELE9BQU9LLFNBQVMsQ0FBQzs7OztHQUloQixDQUFDLENBQ0NDLElBQUksQ0FBQyxDQUFDQztRQUNMTCxRQUFRRCxHQUFHLENBQUMsdUNBQXVDTTtRQUVuRCx3REFBd0Q7UUFDeEQsSUFBSUEsTUFBTSxDQUFDLEVBQUUsQ0FBQ0csTUFBTSxFQUFFO1lBQ3BCVixPQUFPVyxPQUFPLENBQ1hDLEtBQUssR0FDTE4sSUFBSSxDQUFDLENBQUNNO2dCQUNMVixRQUFRRCxHQUFHLENBQUMseUNBQXlDVztZQUN2RCxHQUNDSixLQUFLLENBQUMsQ0FBQ0M7Z0JBQ05QLFFBQVFPLEtBQUssQ0FDWCxrREFDQUE7WUFFSjtRQUNKO0lBQ0YsR0FDQ0QsS0FBSyxDQUFDLENBQUNDO1FBQ05QLFFBQVFPLEtBQUssQ0FBQyx3Q0FBd0NBO0lBQ3hEO0FBQ0osRUFBRSxPQUFPQSxPQUFPO0lBQ2RQLFFBQVFPLEtBQUssQ0FBQyx3Q0FBd0NBO0FBQ3hEO0FBRUEsaUVBQWVULE1BQU1BLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnRlcnZpZXctcHJlcC8uL2xpYi9wcmlzbWEuanM/NzUxNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XHJcblxyXG4vLyDQn9GA0LXQtNC+0YLQstGA0LDRidCw0LXQvCDRgdC+0LfQtNCw0L3QuNC1INC80L3QvtC20LXRgdGC0LLQsCDRjdC60LfQtdC80L/Qu9GP0YDQvtCyIFByaXNtYSBDbGllbnQg0LIg0YDQtdC20LjQvNC1INGA0LDQt9GA0LDQsdC+0YLQutC4XHJcbi8vIGh0dHBzOi8vd3d3LnByaXNtYS5pby9kb2NzL2d1aWRlcy9wZXJmb3JtYW5jZS1hbmQtb3B0aW1pemF0aW9uL2Nvbm5lY3Rpb24tbWFuYWdlbWVudCNwcmV2ZW50LW11bHRpcGxlLWluc3RhbmNlcy1pbi1kZXZlbG9wbWVudFxyXG5cclxuLy8g0KHQvtC30LTQsNC10Lwg0L3QvtCy0YvQuSDRjdC60LfQtdC80L/Qu9GP0YAgUHJpc21hQ2xpZW50INGBINCy0LrQu9GO0YfQtdC90L3Ri9C8INC70L7Qs9C40YDQvtCy0LDQvdC40LXQvCDQt9Cw0L/RgNC+0YHQvtCyXHJcbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoe1xyXG4gIGxvZzogWydxdWVyeScsICdpbmZvJywgJ3dhcm4nLCAnZXJyb3InXSxcclxufSk7XHJcblxyXG4vLyDQlNC+0LHQsNCy0LvRj9C10Lwg0LvQvtCz0LjRgNC+0LLQsNC90LjQtSDQtNC70Y8g0L7RgtC70LDQtNC60LhcclxuY29uc29sZS5sb2coJ1ByaXNtYSBDbGllbnQg0LjQvdC40YbQuNCw0LvQuNC30LjRgNC+0LLQsNC9OicsIHByaXNtYSA/ICfRg9GB0L/QtdGI0L3QvicgOiAn0L7RiNC40LHQutCwJyk7XHJcblxyXG4vLyDQn9GA0L7QstC10YDRj9C10Lwg0LTQvtGB0YLRg9C/0L3QvtGB0YLRjCDQvNC+0LTQtdC70LXQuVxyXG5jb25zb2xlLmxvZygn0JTQvtGB0YLRg9C/0L3Ri9C1INC80L7QtNC10LvQuCDQsiBQcmlzbWEgQ2xpZW50OicsIE9iamVjdC5rZXlzKHByaXNtYSkpO1xyXG5cclxuLy8g0J/RgNC+0LLQtdGA0Y/QtdC8INC90LDQu9C40YfQuNC1INC80L7QtNC10LvQuCBVc2VyUG9pbnRzXHJcbnRyeSB7XHJcbiAgY29uc29sZS5sb2coJ9Cf0YDQvtCy0LXRgNC60LAg0LzQvtC00LXQu9C4IFVzZXJQb2ludHMuLi4nKTtcclxuICAvLyDQktGL0L/QvtC70L3Rj9C10Lwg0YLQtdGB0YLQvtCy0YvQuSDQt9Cw0L/RgNC+0YEg0Log0LzQvtC00LXQu9C4IFVzZXJQb2ludHNcclxuICBwcmlzbWEuJHF1ZXJ5UmF3YFNFTEVDVCBFWElTVFMgKFxyXG4gICAgU0VMRUNUIEZST00gaW5mb3JtYXRpb25fc2NoZW1hLnRhYmxlc1xyXG4gICAgV0hFUkUgdGFibGVfc2NoZW1hID0gJ3B1YmxpYydcclxuICAgIEFORCB0YWJsZV9uYW1lID0gJ1VzZXJQb2ludHMnXHJcbiAgKWBcclxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coJ9Cg0LXQt9GD0LvRjNGC0LDRgiDQv9GA0L7QstC10YDQutC4INGC0LDQsdC70LjRhtGLIFVzZXJQb2ludHM6JywgcmVzdWx0KTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ9Ce0YjQuNCx0LrQsCDQv9GA0Lgg0L/RgNC+0LLQtdGA0LrQtSDRgtCw0LHQu9C40YbRiyBVc2VyUG9pbnRzOicsIGVycm9yKTtcclxuICAgIH0pO1xyXG59IGNhdGNoIChlcnJvcikge1xyXG4gIGNvbnNvbGUuZXJyb3IoJ9Ce0YjQuNCx0LrQsCDQv9GA0Lgg0L/RgNC+0LLQtdGA0LrQtSDQvNC+0LTQtdC70LggVXNlclBvaW50czonLCBlcnJvcik7XHJcbn1cclxuXHJcbi8vINCf0YDQvtCy0LXRgNGP0LXQvCDRgtCw0LHQu9C40YbRgyBTZXNzaW9uXHJcbnRyeSB7XHJcbiAgY29uc29sZS5sb2coJ9Cf0YDQvtCy0LXRgNC60LAg0YLQsNCx0LvQuNGG0YsgU2Vzc2lvbi4uLicpO1xyXG4gIC8vINCS0YvQv9C+0LvQvdGP0LXQvCDRgtC10YHRgtC+0LLRi9C5INC30LDQv9GA0L7RgSDQuiDRgtCw0LHQu9C40YbQtSBTZXNzaW9uXHJcbiAgcHJpc21hLiRxdWVyeVJhd2BTRUxFQ1QgRVhJU1RTIChcclxuICAgIFNFTEVDVCBGUk9NIGluZm9ybWF0aW9uX3NjaGVtYS50YWJsZXNcclxuICAgIFdIRVJFIHRhYmxlX3NjaGVtYSA9ICdwdWJsaWMnXHJcbiAgICBBTkQgdGFibGVfbmFtZSA9ICdTZXNzaW9uJ1xyXG4gIClgXHJcbiAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfQoNC10LfRg9C70YzRgtCw0YIg0L/RgNC+0LLQtdGA0LrQuCDRgtCw0LHQu9C40YbRiyBTZXNzaW9uOicsIHJlc3VsdCk7XHJcblxyXG4gICAgICAvLyDQldGB0LvQuCDRgtCw0LHQu9C40YbQsCDRgdGD0YnQtdGB0YLQstGD0LXRgiwg0L/RgNC+0LLQtdGA0Y/QtdC8INC60L7Qu9C40YfQtdGB0YLQstC+INC30LDQv9C40YHQtdC5XHJcbiAgICAgIGlmIChyZXN1bHRbMF0uZXhpc3RzKSB7XHJcbiAgICAgICAgcHJpc21hLnNlc3Npb25cclxuICAgICAgICAgIC5jb3VudCgpXHJcbiAgICAgICAgICAudGhlbigoY291bnQpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ9Ca0L7Qu9C40YfQtdGB0YLQstC+INC30LDQv9C40YHQtdC5INCyINGC0LDQsdC70LjRhtC1IFNlc3Npb246JywgY291bnQpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICAgICAgICAn0J7RiNC40LHQutCwINC/0YDQuCDQv9C+0LTRgdGH0LXRgtC1INC30LDQv9C40YHQtdC5INCyINGC0LDQsdC70LjRhtC1IFNlc3Npb246JyxcclxuICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ9Ce0YjQuNCx0LrQsCDQv9GA0Lgg0L/RgNC+0LLQtdGA0LrQtSDRgtCw0LHQu9C40YbRiyBTZXNzaW9uOicsIGVycm9yKTtcclxuICAgIH0pO1xyXG59IGNhdGNoIChlcnJvcikge1xyXG4gIGNvbnNvbGUuZXJyb3IoJ9Ce0YjQuNCx0LrQsCDQv9GA0Lgg0L/RgNC+0LLQtdGA0LrQtSDRgtCw0LHQu9C40YbRiyBTZXNzaW9uOicsIGVycm9yKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgcHJpc21hO1xyXG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwicHJpc21hIiwibG9nIiwiY29uc29sZSIsIk9iamVjdCIsImtleXMiLCIkcXVlcnlSYXciLCJ0aGVuIiwicmVzdWx0IiwiY2F0Y2giLCJlcnJvciIsImV4aXN0cyIsInNlc3Npb24iLCJjb3VudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/prisma.js\n");

/***/ }),

/***/ "(api)/./pages/api/user/points.js":
/*!**********************************!*\
  !*** ./pages/api/user/points.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/react */ \"next-auth/react\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/prisma */ \"(api)/./lib/prisma.js\");\n\n\nasync function handler(req, res) {\n    const session = await (0,next_auth_react__WEBPACK_IMPORTED_MODULE_0__.getSession)({\n        req\n    });\n    if (!session) {\n        return res.status(401).json({\n            message: \"Необходима авторизация\"\n        });\n    }\n    // Обработка только GET запросов\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            message: \"Метод не поддерживается\"\n        });\n    }\n    try {\n        console.log(\"Получение баллов для пользователя:\", session.user.id);\n        console.log(\"Полная информация о пользователе в сессии:\", JSON.stringify(session.user, null, 2));\n        // Проверяем, есть ли у пользователя запись о баллах\n        let userPoints = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].userPoints.findUnique({\n            where: {\n                userId: session.user.id\n            }\n        });\n        console.log(\"Текущие баллы пользователя:\", userPoints ? userPoints.points : \"запись не найдена\");\n        if (userPoints) {\n            console.log(\"Детали записи о баллах:\", JSON.stringify(userPoints, null, 2));\n        }\n        // Если у пользователя нет записи о баллах, создаем её с 1 баллом\n        if (!userPoints) {\n            console.log(\"Создаем новую запись с 1 баллом\");\n            try {\n                userPoints = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].userPoints.create({\n                    data: {\n                        userId: session.user.id,\n                        points: 1\n                    }\n                });\n                console.log(\"Запись успешно создана:\", JSON.stringify(userPoints, null, 2));\n            } catch (createError) {\n                console.error(\"Ошибка при создании записи о баллах:\", createError);\n                throw createError;\n            }\n        } else if (userPoints.points === 0) {\n            console.log(\"Обновляем баллы с 0 до 1\");\n            try {\n                userPoints = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].userPoints.update({\n                    where: {\n                        userId: session.user.id\n                    },\n                    data: {\n                        points: 1\n                    }\n                });\n                console.log(\"Запись успешно обновлена:\", JSON.stringify(userPoints, null, 2));\n            } catch (updateError) {\n                console.error(\"Ошибка при обновлении баллов:\", updateError);\n                throw updateError;\n            }\n        }\n        console.log(\"Итоговые баллы пользователя:\", userPoints.points);\n        return res.status(200).json({\n            points: userPoints.points,\n            userId: userPoints.userId,\n            createdAt: userPoints.createdAt,\n            updatedAt: userPoints.updatedAt\n        });\n    } catch (error) {\n        console.error(\"Ошибка при получении баллов пользователя:\", error);\n        return res.status(500).json({\n            message: \"Ошибка сервера при получении баллов пользователя\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvdXNlci9wb2ludHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE2QztBQUNKO0FBRTFCLGVBQWVFLFFBQVFDLEdBQUcsRUFBRUMsR0FBRztJQUM1QyxNQUFNQyxVQUFVLE1BQU1MLDJEQUFVQSxDQUFDO1FBQUVHO0lBQUk7SUFFdkMsSUFBSSxDQUFDRSxTQUFTO1FBQ1osT0FBT0QsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxTQUFTO1FBQXlCO0lBQ2xFO0lBRUEsZ0NBQWdDO0lBQ2hDLElBQUlMLElBQUlNLE1BQU0sS0FBSyxPQUFPO1FBQ3hCLE9BQU9MLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsU0FBUztRQUEwQjtJQUNuRTtJQUVBLElBQUk7UUFDRkUsUUFBUUMsR0FBRyxDQUFDLHNDQUFzQ04sUUFBUU8sSUFBSSxDQUFDQyxFQUFFO1FBQ2pFSCxRQUFRQyxHQUFHLENBQ1QsOENBQ0FHLEtBQUtDLFNBQVMsQ0FBQ1YsUUFBUU8sSUFBSSxFQUFFLE1BQU07UUFHckMsb0RBQW9EO1FBQ3BELElBQUlJLGFBQWEsTUFBTWYsOERBQWlCLENBQUNnQixVQUFVLENBQUM7WUFDbERDLE9BQU87Z0JBQUVDLFFBQVFkLFFBQVFPLElBQUksQ0FBQ0MsRUFBRTtZQUFDO1FBQ25DO1FBRUFILFFBQVFDLEdBQUcsQ0FDVCwrQkFDQUssYUFBYUEsV0FBV0ksTUFBTSxHQUFHO1FBR25DLElBQUlKLFlBQVk7WUFDZE4sUUFBUUMsR0FBRyxDQUNULDJCQUNBRyxLQUFLQyxTQUFTLENBQUNDLFlBQVksTUFBTTtRQUVyQztRQUVBLGlFQUFpRTtRQUNqRSxJQUFJLENBQUNBLFlBQVk7WUFDZk4sUUFBUUMsR0FBRyxDQUFDO1lBQ1osSUFBSTtnQkFDRkssYUFBYSxNQUFNZiw4REFBaUIsQ0FBQ29CLE1BQU0sQ0FBQztvQkFDMUNDLE1BQU07d0JBQ0pILFFBQVFkLFFBQVFPLElBQUksQ0FBQ0MsRUFBRTt3QkFDdkJPLFFBQVE7b0JBQ1Y7Z0JBQ0Y7Z0JBQ0FWLFFBQVFDLEdBQUcsQ0FDVCwyQkFDQUcsS0FBS0MsU0FBUyxDQUFDQyxZQUFZLE1BQU07WUFFckMsRUFBRSxPQUFPTyxhQUFhO2dCQUNwQmIsUUFBUWMsS0FBSyxDQUFDLHdDQUF3Q0Q7Z0JBQ3RELE1BQU1BO1lBQ1I7UUFDRixPQUVLLElBQUlQLFdBQVdJLE1BQU0sS0FBSyxHQUFHO1lBQ2hDVixRQUFRQyxHQUFHLENBQUM7WUFDWixJQUFJO2dCQUNGSyxhQUFhLE1BQU1mLDhEQUFpQixDQUFDd0IsTUFBTSxDQUFDO29CQUMxQ1AsT0FBTzt3QkFBRUMsUUFBUWQsUUFBUU8sSUFBSSxDQUFDQyxFQUFFO29CQUFDO29CQUNqQ1MsTUFBTTt3QkFDSkYsUUFBUTtvQkFDVjtnQkFDRjtnQkFDQVYsUUFBUUMsR0FBRyxDQUNULDZCQUNBRyxLQUFLQyxTQUFTLENBQUNDLFlBQVksTUFBTTtZQUVyQyxFQUFFLE9BQU9VLGFBQWE7Z0JBQ3BCaEIsUUFBUWMsS0FBSyxDQUFDLGlDQUFpQ0U7Z0JBQy9DLE1BQU1BO1lBQ1I7UUFDRjtRQUVBaEIsUUFBUUMsR0FBRyxDQUFDLGdDQUFnQ0ssV0FBV0ksTUFBTTtRQUU3RCxPQUFPaEIsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQmEsUUFBUUosV0FBV0ksTUFBTTtZQUN6QkQsUUFBUUgsV0FBV0csTUFBTTtZQUN6QlEsV0FBV1gsV0FBV1csU0FBUztZQUMvQkMsV0FBV1osV0FBV1ksU0FBUztRQUNqQztJQUNGLEVBQUUsT0FBT0osT0FBTztRQUNkZCxRQUFRYyxLQUFLLENBQUMsNkNBQTZDQTtRQUMzRCxPQUFPcEIsSUFDSkUsTUFBTSxDQUFDLEtBQ1BDLElBQUksQ0FBQztZQUFFQyxTQUFTO1FBQW1EO0lBQ3hFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnRlcnZpZXctcHJlcC8uL3BhZ2VzL2FwaS91c2VyL3BvaW50cy5qcz83MzRlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldFNlc3Npb24gfSBmcm9tICduZXh0LWF1dGgvcmVhY3QnO1xyXG5pbXBvcnQgcHJpc21hIGZyb20gJy4uLy4uLy4uL2xpYi9wcmlzbWEnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKHsgcmVxIH0pO1xyXG5cclxuICBpZiAoIXNlc3Npb24pIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICfQndC10L7QsdGF0L7QtNC40LzQsCDQsNCy0YLQvtGA0LjQt9Cw0YbQuNGPJyB9KTtcclxuICB9XHJcblxyXG4gIC8vINCe0LHRgNCw0LHQvtGC0LrQsCDRgtC+0LvRjNC60L4gR0VUINC30LDQv9GA0L7RgdC+0LJcclxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ0dFVCcpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IG1lc3NhZ2U6ICfQnNC10YLQvtC0INC90LUg0L/QvtC00LTQtdGA0LbQuNCy0LDQtdGC0YHRjycgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ9Cf0L7Qu9GD0YfQtdC90LjQtSDQsdCw0LvQu9C+0LIg0LTQu9GPINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjzonLCBzZXNzaW9uLnVzZXIuaWQpO1xyXG4gICAgY29uc29sZS5sb2coXHJcbiAgICAgICfQn9C+0LvQvdCw0Y8g0LjQvdGE0L7RgNC80LDRhtC40Y8g0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1INCyINGB0LXRgdGB0LjQuDonLFxyXG4gICAgICBKU09OLnN0cmluZ2lmeShzZXNzaW9uLnVzZXIsIG51bGwsIDIpXHJcbiAgICApO1xyXG5cclxuICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0LXRgdGC0Ywg0LvQuCDRgyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0LfQsNC/0LjRgdGMINC+INCx0LDQu9C70LDRhVxyXG4gICAgbGV0IHVzZXJQb2ludHMgPSBhd2FpdCBwcmlzbWEudXNlclBvaW50cy5maW5kVW5pcXVlKHtcclxuICAgICAgd2hlcmU6IHsgdXNlcklkOiBzZXNzaW9uLnVzZXIuaWQgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAn0KLQtdC60YPRidC40LUg0LHQsNC70LvRiyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y86JyxcclxuICAgICAgdXNlclBvaW50cyA/IHVzZXJQb2ludHMucG9pbnRzIDogJ9C30LDQv9C40YHRjCDQvdC1INC90LDQudC00LXQvdCwJ1xyXG4gICAgKTtcclxuXHJcbiAgICBpZiAodXNlclBvaW50cykge1xyXG4gICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICAn0JTQtdGC0LDQu9C4INC30LDQv9C40YHQuCDQviDQsdCw0LvQu9Cw0YU6JyxcclxuICAgICAgICBKU09OLnN0cmluZ2lmeSh1c2VyUG9pbnRzLCBudWxsLCAyKVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINCV0YHQu9C4INGDINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQvdC10YIg0LfQsNC/0LjRgdC4INC+INCx0LDQu9C70LDRhSwg0YHQvtC30LTQsNC10Lwg0LXRkSDRgSAxINCx0LDQu9C70L7QvFxyXG4gICAgaWYgKCF1c2VyUG9pbnRzKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfQodC+0LfQtNCw0LXQvCDQvdC+0LLRg9GOINC30LDQv9C40YHRjCDRgSAxINCx0LDQu9C70L7QvCcpO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHVzZXJQb2ludHMgPSBhd2FpdCBwcmlzbWEudXNlclBvaW50cy5jcmVhdGUoe1xyXG4gICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICB1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcclxuICAgICAgICAgICAgcG9pbnRzOiAxLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICAgICfQl9Cw0L/QuNGB0Ywg0YPRgdC/0LXRiNC90L4g0YHQvtC30LTQsNC90LA6JyxcclxuICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHVzZXJQb2ludHMsIG51bGwsIDIpXHJcbiAgICAgICAgKTtcclxuICAgICAgfSBjYXRjaCAoY3JlYXRlRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCfQntGI0LjQsdC60LAg0L/RgNC4INGB0L7Qt9C00LDQvdC40Lgg0LfQsNC/0LjRgdC4INC+INCx0LDQu9C70LDRhTonLCBjcmVhdGVFcnJvcik7XHJcbiAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3I7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vINCV0YHQu9C4INGDINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQtdGB0YLRjCDQt9Cw0L/QuNGB0Ywg0L4g0LHQsNC70LvQsNGFLCDQvdC+INCx0LDQu9C70L7QsiAwLCDQvtCx0L3QvtCy0LvRj9C10Lwg0LTQviAxXHJcbiAgICBlbHNlIGlmICh1c2VyUG9pbnRzLnBvaW50cyA9PT0gMCkge1xyXG4gICAgICBjb25zb2xlLmxvZygn0J7QsdC90L7QstC70Y/QtdC8INCx0LDQu9C70Ysg0YEgMCDQtNC+IDEnKTtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICB1c2VyUG9pbnRzID0gYXdhaXQgcHJpc21hLnVzZXJQb2ludHMudXBkYXRlKHtcclxuICAgICAgICAgIHdoZXJlOiB7IHVzZXJJZDogc2Vzc2lvbi51c2VyLmlkIH0sXHJcbiAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgIHBvaW50czogMSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICAn0JfQsNC/0LjRgdGMINGD0YHQv9C10YjQvdC+INC+0LHQvdC+0LLQu9C10L3QsDonLFxyXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkodXNlclBvaW50cywgbnVsbCwgMilcclxuICAgICAgICApO1xyXG4gICAgICB9IGNhdGNoICh1cGRhdGVFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ9Ce0YjQuNCx0LrQsCDQv9GA0Lgg0L7QsdC90L7QstC70LXQvdC40Lgg0LHQsNC70LvQvtCyOicsIHVwZGF0ZUVycm9yKTtcclxuICAgICAgICB0aHJvdyB1cGRhdGVFcnJvcjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCfQmNGC0L7Qs9C+0LLRi9C1INCx0LDQu9C70Ysg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPOicsIHVzZXJQb2ludHMucG9pbnRzKTtcclxuXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICBwb2ludHM6IHVzZXJQb2ludHMucG9pbnRzLFxyXG4gICAgICB1c2VySWQ6IHVzZXJQb2ludHMudXNlcklkLFxyXG4gICAgICBjcmVhdGVkQXQ6IHVzZXJQb2ludHMuY3JlYXRlZEF0LFxyXG4gICAgICB1cGRhdGVkQXQ6IHVzZXJQb2ludHMudXBkYXRlZEF0LFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ9Ce0YjQuNCx0LrQsCDQv9GA0Lgg0L/QvtC70YPRh9C10L3QuNC4INCx0LDQu9C70L7QsiDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y86JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHJlc1xyXG4gICAgICAuc3RhdHVzKDUwMClcclxuICAgICAgLmpzb24oeyBtZXNzYWdlOiAn0J7RiNC40LHQutCwINGB0LXRgNCy0LXRgNCwINC/0YDQuCDQv9C+0LvRg9GH0LXQvdC40Lgg0LHQsNC70LvQvtCyINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjycgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJnZXRTZXNzaW9uIiwicHJpc21hIiwiaGFuZGxlciIsInJlcSIsInJlcyIsInNlc3Npb24iLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsIm1ldGhvZCIsImNvbnNvbGUiLCJsb2ciLCJ1c2VyIiwiaWQiLCJKU09OIiwic3RyaW5naWZ5IiwidXNlclBvaW50cyIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsInVzZXJJZCIsInBvaW50cyIsImNyZWF0ZSIsImRhdGEiLCJjcmVhdGVFcnJvciIsImVycm9yIiwidXBkYXRlIiwidXBkYXRlRXJyb3IiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/user/points.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Fpoints&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cpoints.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();