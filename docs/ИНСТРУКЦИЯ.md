# Инструкция по использованию TrenerFront

## Содержание

1. [Введение](#введение)
2. [Быстрый старт](#быстрый-старт)
3. [Работа с Docker](#работа-с-docker)
4. [Управление базой данных](#управление-базой-данных)
5. [Работа с вопросами](#работа-с-вопросами)
6. [Разработка](#разработка)
7. [Устранение проблем](#устранение-проблем)

## Введение

TrenerFront - это приложение для подготовки к собеседованиям Frontend разработчика. Оно позволяет изучать вопросы по Frontend разработке, отмечать свой прогресс и фокусироваться на вопросах, которые требуют повторения.

## Быстрый старт

Для быстрого запуска приложения выполните следующие шаги:

1. Убедитесь, что у вас установлены [Node.js](https://nodejs.org/) (версия 14 или выше) и [Docker](https://www.docker.com/products/docker-desktop/).

2. Запустите скрипт для вашей операционной системы:

   **Windows**:

   ```
   start-app.bat
   ```

   **Linux/Mac**:

   ```
   ./start-app.sh
   ```

   Этот скрипт автоматически:

   - Запустит Docker контейнер с базой данных PostgreSQL
   - Применит необходимые миграции базы данных
   - Запустит приложение на http://localhost:3000
   - Откроет приложение в браузере

## Работа с Docker

Для управления Docker контейнерами используйте скрипт для вашей операционной системы:

**Windows**:

```
scripts\docker\docker-control.bat
```

**Linux/Mac**:

```
./scripts/docker/docker-control.sh
```

Этот скрипт предоставляет меню с следующими опциями:

- Запуск контейнеров
- Остановка контейнеров
- Перезапуск контейнеров
- Проверка статуса контейнеров
- Открытие pgAdmin для управления базой данных
- Обновление базы данных

### Доступ к pgAdmin

После запуска Docker контейнеров вы можете получить доступ к pgAdmin по адресу http://localhost:8080:

- Email: admin@example.com
- Пароль: admin

Для подключения к базе данных в pgAdmin используйте следующие параметры:

- Хост: postgres
- Порт: 5432
- База данных: interview_prep
- Пользователь: user
- Пароль: password

## Управление базой данных

### Обновление базы данных

Для обновления базы данных (применение миграций и импорт вопросов) используйте скрипт для вашей операционной системы:

**Windows**:

```
scripts\docker\update-db.bat
```

**Linux/Mac**:

```
./scripts/docker/update-db.sh
```

### Сброс базы данных

Для полного сброса базы данных и повторного применения миграций используйте команду:

```
npm run db:reset
```

### Просмотр базы данных через Prisma Studio

Для просмотра и редактирования данных через Prisma Studio используйте команду:

```
npm run db:studio
```

Это откроет Prisma Studio в браузере по адресу http://localhost:5555.

## Работа с вопросами

### Импорт вопросов

Приложение поддерживает два формата файлов с вопросами:

1. **Простой формат** (questions.txt):

   ```
   npm run db:import
   ```

2. **Расширенный формат** (txt):
   ```
   npm run db:import-extended
   ```

### Добавление новых вопросов

1. Для добавления вопросов в простом формате отредактируйте файл `questions.txt`, добавив каждый вопрос на новой строке.

2. Для добавления вопросов в расширенном формате отредактируйте файл `txt`, соблюдая формат:

   ```
   Шанс	Вопрос	Тег
   96%	Расскажи о себе	Нет
   66%	Расскажи про event loop	Нет
   46%	Что такое замыкание	Javascript
   ```

3. После редактирования файла запустите соответствующую команду импорта.

## Разработка

### Запуск в режиме разработки

```
npm run dev
```

### Сборка для продакшена

```
npm run build
npm run start
```

### Проверка кода

```
npm run lint
```

## Устранение проблем

### Проблемы с Docker

Если у вас возникают проблемы с Docker:

1. Убедитесь, что Docker Desktop запущен
2. Попробуйте перезапустить контейнеры:
   ```
   docker-compose down
   docker-compose up -d
   ```

### Проблемы с базой данных

Если у вас возникают проблемы с базой данных:

1. Проверьте, что контейнер с PostgreSQL запущен:

   ```
   docker ps
   ```

2. Проверьте логи контейнера:

   ```
   docker logs trenerfront_postgres
   ```

3. Попробуйте сбросить базу данных:
   ```
   npm run db:reset
   ```

### Проблемы с приложением

Если приложение не запускается или работает некорректно:

1. Проверьте, что все зависимости установлены:

   ```
   npm install
   ```

2. Проверьте, что порт 3000 не занят другим приложением:

   ```
   netstat -ano | findstr :3000
   ```

3. Проверьте логи приложения в консоли, где запущен `npm run dev`
