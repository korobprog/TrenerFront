# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ø–Ω–¥–µ–∫—Å SMTP

## ‚úÖ –¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω

**–î–∞—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** 30.05.2025, 12:19:36  
**–°—Ç–∞—Ç—É—Å:** –£—Å–ø–µ—à–Ω–æ ‚úÖ

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

- ‚úÖ –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞–π–¥–µ–Ω—ã
- üìß SMTP Host: `smtp.yandex.ru`
- üîå SMTP Port: `587`
- üë§ SMTP User: `makstreid@yandex.ru`
- üì® Email From: `–°–µ—Ä–≤–∏—Å —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π <makstreid@yandex.ru>`

### 2. –°–æ–∑–¥–∞–Ω–∏–µ SMTP —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞

- ‚úÖ SMTP —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ
- üîß –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è nodemailer –≤–µ—Ä—Å–∏–∏ 6.10.1

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ SMTP —Å–µ—Ä–≤–µ—Ä—É —É—Å–ø–µ—à–Ω–æ
- üåê IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞: `77.88.21.158:587`
- üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `makstreid@yandex.ru` –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ
- üîí –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞—â–∏—â–µ–Ω–æ STARTTLS

### 4. –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–∏—Å—å–º–∞

- ‚úÖ –ü–∏—Å—å–º–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ
- üìß Message ID: `<6506dcee-919f-6b0e-1a9c-f70e03b827ad@yandex.ru>`
- üì® –ü–æ–ª—É—á–∞—Ç–µ–ª—å: `makstreid@yandex.ru`
- üì¨ –ü–∏—Å—å–º–æ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –≤ –æ—á–µ—Ä–µ–¥—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ø–Ω–¥–µ–∫—Å

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ SMTP

```env
YANDEX_SMTP_HOST=smtp.yandex.ru
YANDEX_SMTP_PORT=587
YANDEX_SMTP_SECURE=false
YANDEX_SMTP_USER=makstreid@yandex.ru
YANDEX_SMTP_PASSWORD=icqupesckulmuvdq
YANDEX_EMAIL_FROM="–°–µ—Ä–≤–∏—Å —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π <makstreid@yandex.ru>"
```

## üìù –î–µ—Ç–∞–ª–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### SMTP Handshake

- –°–µ—Ä–≤–µ—Ä: `mail-nwsmtp-smtp-production-main-98.sas.yp-c.yandex.net`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
  - 8BITMIME
  - PIPELINING
  - SIZE 53477376 (–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–∏—Å—å–º–∞ ~53MB)
  - STARTTLS (—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ)
  - AUTH LOGIN PLAIN XOAUTH2 (–º–µ—Ç–æ–¥—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
  - DSN (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–æ—Å—Ç–∞–≤–∫–µ)
  - ENHANCEDSTATUSCODES

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- –ú–µ—Ç–æ–¥: AUTH PLAIN
- –°—Ç–∞—Ç—É—Å: `235 2.7.0 Authentication successful`
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω

### –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞

- –ö–æ–º–∞–Ω–¥–∞ MAIL FROM: —É—Å–ø–µ—à–Ω–æ
- –ö–æ–º–∞–Ω–¥–∞ RCPT TO: —É—Å–ø–µ—à–Ω–æ
- –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö: —É—Å–ø–µ—à–Ω–æ
- –†–µ–∑—É–ª—å—Ç–∞—Ç: `250 2.0.0 Ok: queued on mail-nwsmtp-smtp-production-main-98.sas.yp-c.yandex.net`

## üéØ –í—ã–≤–æ–¥—ã

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ø–Ω–¥–µ–∫—Å SMTP —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** ‚úÖ
2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ** ‚úÖ
3. **–ü–∏—Å—å–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫** ‚úÖ
4. **–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞—â–∏—â–µ–Ω–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º STARTTLS** ‚úÖ
5. **–°–µ—Ä–≤–µ—Ä –Ø–Ω–¥–µ–∫—Å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∏—Å—å–º–∞ –≤ –æ—á–µ—Ä–µ–¥—å** ‚úÖ

## üìß –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–∏—Å—å–º–∞

–¢–µ—Å—Ç–æ–≤–æ–µ –ø–∏—Å—å–º–æ —Å–æ–¥–µ—Ä–∂–∞–ª–æ:

- HTML –∏ —Ç–µ–∫—Å—Ç–æ–≤—É—é –≤–µ—Ä—Å–∏–∏
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
- –î–µ—Ç–∞–ª–∏ SMTP –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –Ø–Ω–¥–µ–∫—Å SMTP –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
2. üîÑ –ú–æ–∂–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å NextAuth.js –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
3. üîÑ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub OAuth (Client ID –∏ Secret —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã)
4. üîÑ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [`docs/yandex-smtp-setup-guide.md`](yandex-smtp-setup-guide.md) - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- [`docs/email-provider-implementation.md`](email-provider-implementation.md) - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è email –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- [`test-yandex-email.js`](../test-yandex-email.js) - –°–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
