# –ü–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ OAuth –∏ Email

## üìã –û–±–∑–æ—Ä —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–î–∞—Ç–∞:** 30.05.2025  
**–í—Ä–µ–º—è:** 12:20  
**–°—Ç–∞—Ç—É—Å:** –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ ‚úÖ

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. ‚úÖ –Ø–Ω–¥–µ–∫—Å SMTP - –£–°–ü–ï–®–ù–û

**–°—Ç–∞—Ç—É—Å:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–µ–Ω  
**–¢–µ—Å—Ç–æ–≤–æ–µ –ø–∏—Å—å–º–æ:** –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ

#### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ SMTP —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É `smtp.yandex.ru:587` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `makstreid@yandex.ru` –ø—Ä–æ—à–ª–∞
- ‚úÖ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ STARTTLS –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ
- ‚úÖ –¢–µ—Å—Ç–æ–≤–æ–µ –ø–∏—Å—å–º–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ (Message ID: `6506dcee-919f-6b0e-1a9c-f70e03b827ad`)

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏:

```env
YANDEX_SMTP_HOST=smtp.yandex.ru
YANDEX_SMTP_PORT=587
YANDEX_SMTP_SECURE=false
YANDEX_SMTP_USER=makstreid@yandex.ru
YANDEX_SMTP_PASSWORD=icqupesckulmuvdq
YANDEX_EMAIL_FROM="–°–µ—Ä–≤–∏—Å —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π <makstreid@yandex.ru>"
```

### 2. ‚úÖ GitHub OAuth - –£–°–ü–ï–®–ù–û

**–°—Ç–∞—Ç—É—Å:** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã  
**Client ID:** `Ov23liHhIXFR1Ga7vVvN` (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç OAuth App)

#### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ GitHub Client ID –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç OAuth App
- ‚úÖ GitHub Client Secret –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ NextAuth URL –∏ Secret –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ Callback URL —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ GitHub API –¥–æ—Å—Ç—É–ø–µ–Ω

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏:

```env
GITHUB_CLIENT_ID=Ov23liHhIXFR1Ga7vVvN
GITHUB_CLIENT_SECRET=bb58160af0aaae3b3d17db218554158b2a74d24d
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=UXs937KdO/OPKEPMA6ekW5sJ3UCNY2auZt9fmqWj0yk=
```

#### Callback URL:

```
http://localhost:3000/api/auth/callback/github
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –Ø–Ω–¥–µ–∫—Å SMTP

- **–°–µ—Ä–≤–µ—Ä:** `mail-nwsmtp-smtp-production-main-98.sas.yp-c.yandex.net`
- **IP:** `77.88.21.158:587`
- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ:** STARTTLS
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** AUTH PLAIN
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–∏—Å—å–º–∞:** 53MB
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:** 8BITMIME, PIPELINING, DSN, ENHANCEDSTATUSCODES

### GitHub OAuth

- **URL –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:** `https://github.com/login/oauth/authorize`
- **Scope:** `user:email`
- **–¢–∏–ø –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** OAuth App (–Ω–µ GitHub App)
- **API —Å—Ç–∞—Ç—É—Å:** –î–æ—Å—Ç—É–ø–µ–Ω

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç    | –°—Ç–∞—Ç—É—Å      | –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è | –î–µ—Ç–∞–ª–∏                      |
| ------------ | ----------- | ---------------- | --------------------------- |
| –Ø–Ω–¥–µ–∫—Å SMTP  | ‚úÖ –£—Å–ø–µ—à–Ω–æ  | ~2 —Å–µ–∫           | –ü–∏—Å—å–º–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ           |
| GitHub OAuth | ‚úÖ –£—Å–ø–µ—à–Ω–æ  | ~1 —Å–µ–∫           | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞–ª–∏–¥–Ω—ã           |
| GitHub API   | ‚úÖ –î–æ—Å—Ç—É–ø–µ–Ω | ~0.5 —Å–µ–∫         | 401 Unauthorized (–æ–∂–∏–¥–∞–µ–º–æ) |

## üéâ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **Email –æ—Ç–ø—Ä–∞–≤–∫–∞** - –Ø–Ω–¥–µ–∫—Å SMTP –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω
2. **GitHub –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** - OAuth App –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. **NextAuth.js** - –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–æ—Ç–æ–≤—ã

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. ‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**

   - –û—Ç–∫—Ä—ã—Ç—å `http://localhost:3000`
   - –ù–∞–∂–∞—Ç—å "–í–æ–π—Ç–∏"
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å GitHub"
   - –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é

2. üîÑ **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**

   - –û–±–Ω–æ–≤–∏—Ç—å callback URL –≤ GitHub OAuth App
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env.production`

3. üîÑ **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã:**
   - Google OAuth —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
   - Email –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:

- [`test-yandex-email.js`](../test-yandex-email.js) - –¢–µ—Å—Ç –Ø–Ω–¥–µ–∫—Å SMTP
- [`test-github-oauth.js`](../test-github-oauth.js) - –¢–µ—Å—Ç GitHub OAuth

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

- [`docs/yandex-email-test-results.md`](yandex-email-test-results.md) - –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã SMTP
- [`docs/github-oauth-setup.md`](github-oauth-setup.md) - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ GitHub OAuth
- [`docs/oauth-testing-complete-report.md`](oauth-testing-complete-report.md) - –≠—Ç–æ—Ç –æ—Ç—á–µ—Ç

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã:

- ‚úÖ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ SMTP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (STARTTLS)
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ .env —Ñ–∞–π–ª–∞—Ö
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç OAuth —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–Ω—ã–µ callback URL

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

- üîê –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ .env —Ñ–∞–π–ª—ã
- üîÑ –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã
- üåê –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- üìß –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É email

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–í—Å–µ —Å–∏—Å—Ç–µ–º—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ email –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

- ‚úÖ –Ø–Ω–¥–µ–∫—Å SMTP —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∏—Å—å–º–∞
- ‚úÖ GitHub OAuth –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ NextAuth.js –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
